{
  "openapi": "3.0.4",
  "info": {
    "title": "Web Thi TN API",
    "description": "API cho hệ thống thi trắc nghiệm trực tuyến",
    "contact": {
      "name": "Thien1124",
      "email": "thien1124@example.com"
    },
    "version": "v1"
  },
  "paths": {
    "/api/Auth/register": {
      "post": {
        "tags": [
          "Auth"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/Auth/login": {
      "post": {
        "tags": [
          "Auth"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/Auth/verify-token": {
      "get": {
        "tags": [
          "Auth"
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/Exam": {
      "get": {
        "tags": [
          "Exam"
        ],
        "summary": "Lấy danh sách bài thi với các bộ lọc và phân trang",
        "description": "API này cho phép lấy danh sách bài thi với nhiều tùy chọn lọc khác nhau.\r\nCó thể lọc theo môn học, loại bài thi, trạng thái, từ khóa và phân trang kết quả.\r\n\r\nSample request:\r\n            \r\n    GET /api/Exam?SubjectId=1&ExamTypeId=3&Page=1&PageSize=10&ActiveOnly=true&IsOpen=true",
        "parameters": [
          {
            "name": "SubjectId",
            "in": "query",
            "description": "ID của môn học cần lọc",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32",
              "example": 1
            },
            "example": 1
          },
          {
            "name": "ExamTypeId",
            "in": "query",
            "description": "ID của loại bài thi",
            "schema": {
              "type": "integer",
              "format": "int32",
              "example": 3
            },
            "example": 3
          },
          {
            "name": "Page",
            "in": "query",
            "description": "Trang hiện tại",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32",
              "example": 1
            },
            "example": 1
          },
          {
            "name": "PageSize",
            "in": "query",
            "description": "Số lượng bản ghi mỗi trang",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32",
              "example": 10
            },
            "example": 10
          },
          {
            "name": "ActiveOnly",
            "in": "query",
            "description": "Chỉ lấy các bài thi đang hoạt động",
            "required": true,
            "schema": {
              "type": "boolean",
              "example": true
            },
            "example": true
          },
          {
            "name": "IsOpen",
            "in": "query",
            "description": "Lọc trạng thái bài thi (null: tất cả, true: đang mở, false: đã đóng)",
            "required": true,
            "schema": {
              "type": "boolean",
              "example": true
            },
            "example": true
          },
          {
            "name": "SearchTerm",
            "in": "query",
            "description": "Từ khóa tìm kiếm (tên, mô tả)",
            "required": true,
            "schema": {
              "type": "string",
              "example": "kiểm tra"
            },
            "example": "kiểm tra"
          }
        ],
        "responses": {
          "200": {
            "description": "Trả về danh sách bài thi"
          },
          "500": {
            "description": "Lỗi máy chủ"
          }
        }
      },
      "post": {
        "tags": [
          "Exam"
        ],
        "summary": "Thêm bài thi mới vào hệ thống",
        "description": "API này cho phép giáo viên hoặc admin tạo một bài thi mới.\r\n\r\nSample request:\r\n            \r\n    POST /api/Exam\r\n    {\r\n        \"title\": \"Kiểm tra cuối kỳ Toán 12\",\r\n        \"description\": \"Bài kiểm tra kiến thức cuối kỳ Toán 12\",\r\n        \"subjectId\": 1,\r\n        \"examTypeId\": 2,\r\n        \"duration\": 90,\r\n        \"totalScore\": 10,\r\n        \"passScore\": 5,\r\n        \"maxAttempts\": 1,\r\n        \"startTime\": \"2025-04-20T08:00:00Z\",\r\n        \"endTime\": \"2025-04-30T23:59:59Z\",\r\n        \"isActive\": true,\r\n        \"showResult\": true,\r\n        \"showAnswers\": false,\r\n        \"shuffleQuestions\": true,\r\n        \"shuffleOptions\": true,\r\n        \"autoGradeShortAnswer\": true,\r\n        \"allowPartialGrading\": true,\r\n        \"accessCode\": \"math12final\",\r\n        \"scoringConfig\": \"{\\\"gradingMethod\\\":\\\"sum\\\",\\\"partialCreditMethod\\\":\\\"proportional\\\",\\\"penaltyForWrongAnswer\\\":0}\",\r\n        \"questions\": [\r\n            {\r\n                \"questionId\": 42,\r\n                \"order\": 1,\r\n                \"score\": 1\r\n            },\r\n            {\r\n                \"questionId\": 56,\r\n                \"order\": 2,\r\n                \"score\": 2\r\n            }\r\n        ]\r\n    }",
        "requestBody": {
          "description": "Thông tin bài thi cần tạo",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateExamDTO"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateExamDTO"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CreateExamDTO"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Trả về thông tin bài thi đã tạo"
          },
          "400": {
            "description": "Dữ liệu đầu vào không hợp lệ",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Không tìm thấy môn học hoặc loại bài thi",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "500": {
            "description": "Lỗi máy chủ"
          }
        }
      }
    },
    "/api/Exam/BySubject/{subjectId}": {
      "get": {
        "tags": [
          "Exam"
        ],
        "summary": "Lấy danh sách bài thi theo môn học",
        "description": "API này cho phép lấy danh sách bài thi thuộc một môn học cụ thể.\r\n\r\nSample request:\r\n            \r\n    GET /api/Exam/BySubject/1?Page=1&PageSize=10&ActiveOnly=true&IsOpen=true",
        "parameters": [
          {
            "name": "subjectId",
            "in": "path",
            "description": "ID của môn học",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "examTypeId",
            "in": "query",
            "description": "ID của loại bài thi (không bắt buộc)",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Trang hiện tại (mặc định: 1)",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 1
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "Số lượng mỗi trang (mặc định: 10)",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 10
            }
          },
          {
            "name": "activeOnly",
            "in": "query",
            "description": "Chỉ lấy bài thi đang hoạt động (mặc định: true)",
            "schema": {
              "type": "boolean",
              "default": true
            }
          },
          {
            "name": "isOpen",
            "in": "query",
            "description": "Lọc theo trạng thái mở/đóng (null: tất cả)",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "searchTerm",
            "in": "query",
            "description": "Từ khóa tìm kiếm",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Trả về danh sách bài thi"
          },
          "404": {
            "description": "Không tìm thấy môn học",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "500": {
            "description": "Lỗi máy chủ"
          }
        }
      }
    },
    "/api/Exam/ForStudents/{subjectId}": {
      "get": {
        "tags": [
          "Exam"
        ],
        "summary": "Lấy danh sách bài thi cho học sinh",
        "description": "API này cho phép học sinh xem danh sách bài thi đang mở của một môn học.\r\nChỉ hiển thị bài thi đang hoạt động và trong thời gian mở.\r\n\r\nSample request:\r\n            \r\n    GET /api/Exam/ForStudents/1",
        "parameters": [
          {
            "name": "subjectId",
            "in": "path",
            "description": "ID của môn học",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Trang hiện tại (mặc định: 1)",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 1
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "Số lượng mỗi trang (mặc định: 10)",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 10
            }
          },
          {
            "name": "searchTerm",
            "in": "query",
            "description": "Từ khóa tìm kiếm",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Trả về danh sách bài thi"
          },
          "404": {
            "description": "Không tìm thấy môn học",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "500": {
            "description": "Lỗi máy chủ"
          }
        }
      }
    },
    "/api/Exam/{id}": {
      "get": {
        "tags": [
          "Exam"
        ],
        "summary": "Lấy thông tin chi tiết của một bài thi",
        "description": "API này cho phép lấy thông tin chi tiết của một bài thi cụ thể theo ID.\r\n\r\nSample request:\r\n            \r\n    GET /api/Exam/5",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID của bài thi",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Trả về thông tin chi tiết bài thi"
          },
          "404": {
            "description": "Không tìm thấy bài thi",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "500": {
            "description": "Lỗi máy chủ"
          }
        }
      },
      "put": {
        "tags": [
          "Exam"
        ],
        "summary": "Cập nhật thông tin đề thi",
        "description": "API này cho phép giáo viên hoặc admin cập nhật thông tin của một đề thi đã tồn tại.\r\n\r\nSample request:\r\n            \r\n    PUT /api/Exam/5\r\n    {\r\n        \"title\": \"Kiểm tra cuối kỳ Toán 12 (Đã cập nhật)\",\r\n        \"description\": \"Bài kiểm tra kiến thức cuối kỳ Toán 12 - Phiên bản mới\",\r\n        \"subjectId\": 1,\r\n        \"examTypeId\": 2,\r\n        \"duration\": 90,\r\n        \"totalScore\": 10,\r\n        \"passScore\": 6,\r\n        \"maxAttempts\": 2,\r\n        \"startTime\": \"2025-04-20T08:00:00Z\",\r\n        \"endTime\": \"2025-04-30T23:59:59Z\",\r\n        \"isActive\": true,\r\n        \"showResult\": true,\r\n        \"showAnswers\": false,\r\n        \"shuffleQuestions\": true,\r\n        \"shuffleOptions\": true,\r\n        \"autoGradeShortAnswer\": true,\r\n        \"allowPartialGrading\": true,\r\n        \"accessCode\": \"math12final\",\r\n        \"scoringConfig\": \"{\\\"gradingMethod\\\":\\\"sum\\\",\\\"partialCreditMethod\\\":\\\"proportional\\\",\\\"penaltyForWrongAnswer\\\":0}\",\r\n        \"questions\": [\r\n            {\r\n                \"questionId\": 42,\r\n                \"order\": 1,\r\n                \"score\": 1.5\r\n            },\r\n            {\r\n                \"questionId\": 56,\r\n                \"order\": 2,\r\n                \"score\": 2.5\r\n            }\r\n        ]\r\n    }",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID của đề thi cần cập nhật",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "requestBody": {
          "description": "Thông tin cập nhật đề thi",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateExamDTO"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateExamDTO"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CreateExamDTO"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Trả về thông tin đề thi đã cập nhật thành công"
          },
          "400": {
            "description": "Dữ liệu đầu vào không hợp lệ",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Không có quyền cập nhật đề thi này",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Không tìm thấy đề thi, môn học hoặc loại đề thi",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "500": {
            "description": "Lỗi máy chủ"
          }
        }
      },
      "delete": {
        "tags": [
          "Exam"
        ],
        "summary": "Xóa một đề thi khỏi hệ thống",
        "description": "API này cho phép giáo viên hoặc admin xóa một đề thi đã tồn tại.\r\nLưu ý: Đề thi sẽ bị xóa vĩnh viễn cùng với tất cả các câu hỏi liên quan.\r\n\r\nSample request:\r\n            \r\n    DELETE /api/Exam/5",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID của đề thi cần xóa",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Đề thi đã được xóa thành công"
          },
          "403": {
            "description": "Không có quyền xóa đề thi này",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Không tìm thấy đề thi",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "500": {
            "description": "Lỗi máy chủ"
          }
        }
      }
    },
    "/api/Exam/WithQuestions/{id}": {
      "get": {
        "tags": [
          "Exam"
        ],
        "summary": "Lấy thông tin chi tiết của một bài thi kèm danh sách câu hỏi đầy đủ",
        "description": "API này cho phép lấy thông tin chi tiết của một bài thi cụ thể theo ID cùng với danh sách câu hỏi đầy đủ.\r\n\r\nSample request:\r\n            \r\n    GET /api/Exam/WithQuestions/5",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID của bài thi",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Trả về thông tin chi tiết bài thi và câu hỏi"
          },
          "404": {
            "description": "Không tìm thấy bài thi",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "500": {
            "description": "Lỗi máy chủ"
          }
        }
      }
    },
    "/api/Exam/{id}/WithQuestions": {
      "get": {
        "tags": [
          "Exam"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/api/Password/forgot-password": {
      "post": {
        "tags": [
          "Password"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ForgotPasswordRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ForgotPasswordRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ForgotPasswordRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/Password/reset-password": {
      "post": {
        "tags": [
          "Password"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ResetPasswordRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ResetPasswordRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ResetPasswordRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/Password/change-password": {
      "post": {
        "tags": [
          "Password"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePasswordRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePasswordRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePasswordRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/Question": {
      "post": {
        "tags": [
          "Question"
        ],
        "summary": "Thêm một câu hỏi mới vào hệ thống",
        "description": "API này cho phép giáo viên hoặc admin tạo một câu hỏi mới theo một trong ba dạng:\r\n1. Trắc nghiệm một đáp án (QuestionType=1)\r\n2. Đúng-sai nhiều ý (QuestionType=2)\r\n3. Trả lời ngắn (QuestionType=3)",
        "requestBody": {
          "description": "Thông tin câu hỏi cần tạo",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateQuestionDTO"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateQuestionDTO"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CreateQuestionDTO"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      },
      "get": {
        "tags": [
          "Question"
        ],
        "summary": "Lấy danh sách câu hỏi với các bộ lọc và phân trang",
        "parameters": [
          {
            "name": "subjectId",
            "in": "query",
            "description": "ID của môn học",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "chapterId",
            "in": "query",
            "description": "ID của chương",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "levelId",
            "in": "query",
            "description": "ID của mức độ câu hỏi",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "questionType",
            "in": "query",
            "description": "Loại câu hỏi (1: Một đáp án, 2: Đúng-sai nhiều ý, 3: Trả lời ngắn)",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "searchTerm",
            "in": "query",
            "description": "Từ khóa tìm kiếm",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Số trang",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 1
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "Số mục mỗi trang",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 10
            }
          },
          {
            "name": "activeOnly",
            "in": "query",
            "description": "Chỉ lấy câu hỏi đang hoạt động",
            "schema": {
              "type": "boolean",
              "default": true
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/Question/{id}": {
      "get": {
        "tags": [
          "Question"
        ],
        "summary": "Lấy thông tin chi tiết của một câu hỏi theo ID",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID của câu hỏi",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "put": {
        "tags": [
          "Question"
        ],
        "summary": "Cập nhật thông tin của một câu hỏi / chỉnh sửa",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID của câu hỏi cần cập nhật",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "requestBody": {
          "description": "Thông tin cập nhật",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateQuestionDTO"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateQuestionDTO"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateQuestionDTO"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "delete": {
        "tags": [
          "Question"
        ],
        "summary": "Xóa một câu hỏi",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID của câu hỏi cần xóa",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/Question/{questionId}/options/{optionId}": {
      "delete": {
        "tags": [
          "Question"
        ],
        "summary": "Xóa một đáp án khỏi câu hỏi",
        "parameters": [
          {
            "name": "questionId",
            "in": "path",
            "description": "ID của câu hỏi",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "optionId",
            "in": "path",
            "description": "ID của đáp án cần xóa",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/Results": {
      "post": {
        "tags": [
          "Results"
        ],
        "summary": "Nộp bài và tính điểm",
        "requestBody": {
          "description": "Thông tin bài thi và câu trả lời",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SubmitExamDTO"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/SubmitExamDTO"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/SubmitExamDTO"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Created"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/api/Results/user/{userId}": {
      "get": {
        "tags": [
          "Results"
        ],
        "summary": "Lịch sử bài thi theo người dùng",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "description": "ID của người dùng",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "subjectId",
            "in": "query",
            "description": "Lọc theo môn học (không bắt buộc)",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Trang hiện tại",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 1
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "Số lượng kết quả mỗi trang",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/api/Results/{resultId}": {
      "get": {
        "tags": [
          "Results"
        ],
        "summary": "Lấy chi tiết kết quả bài thi",
        "parameters": [
          {
            "name": "resultId",
            "in": "path",
            "description": "ID của kết quả bài thi",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/api/Results/{id}": {
      "delete": {
        "tags": [
          "Results"
        ],
        "summary": "Xóa kết quả bài thi (chỉ dành cho admin)",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID của kết quả bài thi cần xóa",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/api/Results/{resultId}/grade": {
      "put": {
        "tags": [
          "Results"
        ],
        "summary": "Cập nhật điểm bài thi (dành cho giáo viên)",
        "parameters": [
          {
            "name": "resultId",
            "in": "path",
            "description": "ID của kết quả bài thi",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "requestBody": {
          "description": "Thông tin cập nhật điểm",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateResultDTO"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateResultDTO"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateResultDTO"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/api/Subject": {
      "get": {
        "tags": [
          "Subject"
        ],
        "summary": "Lấy danh sách môn học có phân trang",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Trang hiện tại",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 1
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "Số lượng mỗi trang",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 10
            }
          },
          {
            "name": "includeInactive",
            "in": "query",
            "description": "Có hiển thị môn học không hoạt động",
            "schema": {
              "type": "boolean",
              "default": false
            }
          },
          {
            "name": "searchTerm",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "post": {
        "tags": [
          "Subject"
        ],
        "summary": "Tạo môn học mới",
        "requestBody": {
          "description": "Thông tin môn học cần tạo",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSubjectDTO"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSubjectDTO"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSubjectDTO"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/Subject/{id}": {
      "get": {
        "tags": [
          "Subject"
        ],
        "summary": "Lấy chi tiết một môn học theo ID",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID của môn học",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "put": {
        "tags": [
          "Subject"
        ],
        "summary": "Cập nhật thông tin môn học",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID của môn học cần cập nhật",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "requestBody": {
          "description": "Thông tin cần cập nhật",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSubjectDTO"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSubjectDTO"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSubjectDTO"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "delete": {
        "tags": [
          "Subject"
        ],
        "summary": "Xóa môn học",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID của môn học cần xóa",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/Subject/{id}/toggle-status": {
      "patch": {
        "tags": [
          "Subject"
        ],
        "summary": "Thay đổi trạng thái kích hoạt/vô hiệu hóa môn học",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "ID của môn học",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/Subject/all": {
      "get": {
        "tags": [
          "Subject"
        ],
        "summary": "Lấy tất cả môn học không phân trang (sử dụng cho dropdown)",
        "parameters": [
          {
            "name": "activeOnly",
            "in": "query",
            "description": "Chỉ lấy môn học đang hoạt động",
            "schema": {
              "type": "boolean",
              "default": true
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/User/me": {
      "get": {
        "tags": [
          "User"
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/User/update": {
      "put": {
        "tags": [
          "User"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserDTO"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserDTO"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserDTO"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/User/list": {
      "get": {
        "tags": [
          "User"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 1
            }
          },
          {
            "name": "pageSize",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/User/roles/{id}": {
      "put": {
        "tags": [
          "User"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserRoleDTO"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserRoleDTO"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserRoleDTO"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/User/status/{id}": {
      "put": {
        "tags": [
          "User"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserStatusDTO"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserStatusDTO"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateUserStatusDTO"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/User/{id}": {
      "delete": {
        "tags": [
          "User"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/User/system-info": {
      "get": {
        "tags": [
          "User"
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AnswerSubmissionDTO": {
        "type": "object",
        "properties": {
          "questionId": {
            "type": "integer",
            "description": "ID của câu hỏi",
            "format": "int32",
            "example": 42
          },
          "startTime": {
            "type": "string",
            "description": "Thời gian bắt đầu trả lời câu hỏi",
            "format": "date-time",
            "example": "2025-04-12T06:35:20Z"
          },
          "endTime": {
            "type": "string",
            "description": "Thời gian kết thúc trả lời câu hỏi",
            "format": "date-time",
            "example": "2025-04-12T06:36:05Z"
          },
          "selectedOptionId": {
            "type": "integer",
            "description": "ID của đáp án được chọn (cho câu hỏi một đáp án)",
            "format": "int32",
            "nullable": true,
            "example": 15
          },
          "textAnswer": {
            "type": "string",
            "description": "Văn bản câu trả lời (cho câu hỏi trả lời ngắn)",
            "nullable": true,
            "example": "1"
          },
          "trueFalseAnswers": {
            "type": "string",
            "description": "Dữ liệu đáp án đúng-sai (JSON cho câu hỏi đúng-sai nhiều ý)\r\nVí dụ: {\"1\":true,\"2\":false,\"3\":true,\"4\":true}",
            "nullable": true,
            "example": "{\"1\":true,\"2\":false,\"3\":true,\"4\":true}"
          },
          "matchingAnswers": {
            "type": "string",
            "description": "Câu trả lời ghép đôi (cho câu hỏi ghép đôi)\r\nVí dụ: {\"1\":3,\"2\":1,\"3\":4,\"4\":2} - ghép item bên trái với item bên phải",
            "nullable": true,
            "example": "{\"1\":3,\"2\":1,\"3\":4,\"4\":2}"
          }
        },
        "additionalProperties": false,
        "description": "DTO cho một câu trả lời khi nộp bài"
      },
      "ChangePasswordRequest": {
        "required": [
          "currentPassword",
          "newPassword"
        ],
        "type": "object",
        "properties": {
          "currentPassword": {
            "minLength": 1,
            "type": "string"
          },
          "newPassword": {
            "minLength": 6,
            "type": "string"
          },
          "confirmPassword": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "CreateExamDTO": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "description": "Tiêu đề bài thi",
            "nullable": true,
            "example": "Kiểm tra giữa kỳ Toán học"
          },
          "description": {
            "type": "string",
            "description": "Mô tả bài thi",
            "nullable": true,
            "example": "Bài kiểm tra kiến thức cơ bản về đạo hàm và tích phân"
          },
          "subjectId": {
            "type": "integer",
            "description": "ID của môn học",
            "format": "int32",
            "example": 1
          },
          "examTypeId": {
            "type": "integer",
            "description": "ID của loại bài thi",
            "format": "int32",
            "example": 3
          },
          "duration": {
            "type": "integer",
            "description": "Thời gian làm bài (phút)",
            "format": "int32",
            "example": 45
          },
          "totalScore": {
            "type": "number",
            "description": "Điểm tối đa của bài thi",
            "format": "double",
            "example": 10
          },
          "passScore": {
            "type": "number",
            "description": "Điểm đạt của bài thi",
            "format": "double",
            "nullable": true,
            "example": 5
          },
          "maxAttempts": {
            "type": "integer",
            "description": "Số lần được làm bài",
            "format": "int32",
            "nullable": true,
            "example": 2
          },
          "startTime": {
            "type": "string",
            "description": "Thời gian bắt đầu mở bài thi",
            "format": "date-time",
            "nullable": true,
            "example": "2025-04-05T08:00:00Z"
          },
          "endTime": {
            "type": "string",
            "description": "Thời gian kết thúc đóng bài thi",
            "format": "date-time",
            "nullable": true,
            "example": "2025-04-15T23:59:59Z"
          },
          "isActive": {
            "type": "boolean",
            "description": "Trạng thái kích hoạt của bài thi",
            "example": true
          },
          "showResult": {
            "type": "boolean",
            "description": "Hiển thị kết quả sau khi làm bài",
            "example": true
          },
          "showAnswers": {
            "type": "boolean",
            "description": "Hiển thị đáp án sau khi làm bài",
            "example": false
          },
          "shuffleQuestions": {
            "type": "boolean",
            "description": "Trộn câu hỏi khi hiển thị",
            "example": true
          },
          "shuffleOptions": {
            "type": "boolean",
            "description": "Trộn đáp án khi hiển thị (áp dụng cho câu hỏi trắc nghiệm một đáp án)",
            "example": true
          },
          "autoGradeShortAnswer": {
            "type": "boolean",
            "description": "Cài đặt chấm tự động câu hỏi trả lời ngắn",
            "example": true
          },
          "allowPartialGrading": {
            "type": "boolean",
            "description": "Cài đặt mức điểm đạt (%) cho câu hỏi đúng-sai nhiều ý nếu trả lời đúng một phần",
            "example": true
          },
          "accessCode": {
            "type": "string",
            "description": "Mã truy cập bài thi (nếu được bảo vệ)",
            "nullable": true,
            "example": "abc123"
          },
          "scoringConfig": {
            "type": "string",
            "description": "Cấu hình tính điểm (JSON)",
            "nullable": true
          },
          "questions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ExamQuestionCreateDTO"
            },
            "description": "Danh sách ID câu hỏi đưa vào bài thi",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "DTO tạo mới bài thi"
      },
      "CreateQuestionDTO": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string",
            "description": "Nội dung câu hỏi",
            "nullable": true,
            "example": "Tính giới hạn của hàm số f(x) = sin(x)/x khi x tiến đến 0"
          },
          "explanation": {
            "type": "string",
            "description": "Giải thích cho câu hỏi",
            "nullable": true,
            "example": "Áp dụng định lý L'Hospital ta có giới hạn bằng 1"
          },
          "subjectId": {
            "type": "integer",
            "description": "ID môn học",
            "format": "int32",
            "example": 1
          },
          "chapterId": {
            "type": "integer",
            "description": "ID chương (không bắt buộc)",
            "format": "int32",
            "nullable": true,
            "example": 3
          },
          "questionLevelId": {
            "type": "integer",
            "description": "ID mức độ câu hỏi",
            "format": "int32",
            "example": 3
          },
          "questionType": {
            "type": "integer",
            "description": "Loại câu hỏi\r\n1: Một đáp án (trắc nghiệm a,b,c,d)\r\n3: Trả lời ngắn với nhiều đáp án có thể chấp nhận được\r\n5: Đúng-sai nhiều ý (dùng cho trắc nghiệm đúng-sai 4 ý)",
            "format": "int32",
            "example": 1
          },
          "tags": {
            "type": "string",
            "description": "Tags của câu hỏi, phân cách bởi dấu phẩy",
            "nullable": true,
            "example": "giới hạn,đạo hàm"
          },
          "suggestedTime": {
            "type": "integer",
            "description": "Thời gian làm câu hỏi gợi ý (giây)",
            "format": "int32",
            "nullable": true,
            "example": 60
          },
          "defaultScore": {
            "type": "number",
            "description": "Điểm mặc định",
            "format": "double",
            "example": 1
          },
          "isActive": {
            "type": "boolean",
            "description": "Trạng thái kích hoạt",
            "example": true
          },
          "scoringConfig": {
            "type": "string",
            "description": "Cấu hình tính điểm cho câu hỏi đúng-sai nhiều ý (JSON)",
            "nullable": true
          },
          "shortAnswerConfig": {
            "type": "string",
            "description": "Cấu hình cho câu hỏi trả lời ngắn (JSON)",
            "nullable": true
          },
          "options": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CreateQuestionOptionDTO"
            },
            "description": "Danh sách các đáp án",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "DTO để tạo mới câu hỏi"
      },
      "CreateQuestionOptionDTO": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string",
            "description": "Nội dung đáp án",
            "nullable": true,
            "example": "1"
          },
          "isCorrect": {
            "type": "boolean",
            "description": "Đánh dấu đáp án đúng",
            "example": true
          },
          "orderIndex": {
            "type": "integer",
            "description": "Thứ tự hiển thị",
            "format": "int32",
            "example": 1
          },
          "label": {
            "type": "string",
            "description": "Ký hiệu tùy chỉnh (a, b, c, d hoặc khác) cho đáp án",
            "nullable": true,
            "example": "a"
          },
          "explanation": {
            "type": "string",
            "description": "Giải thích cho đáp án",
            "nullable": true,
            "example": "Đây là đáp án đúng vì..."
          },
          "matchingValue": {
            "type": "string",
            "description": "Giá trị ghép đôi (cho câu hỏi ghép đôi)",
            "nullable": true,
            "example": "Paris"
          },
          "isPartOfTrueFalseGroup": {
            "type": "boolean",
            "description": "Đánh dấu nếu đây là một mục Đúng-Sai trong câu hỏi đúng-sai nhiều ý"
          },
          "groupId": {
            "type": "integer",
            "description": "Nhóm đáp án (dùng cho câu hỏi đúng-sai nhiều ý)",
            "format": "int32",
            "nullable": true
          },
          "scorePercentage": {
            "type": "integer",
            "description": "Mức điểm cho đáp án này (0-100%)",
            "format": "int32",
            "example": 100
          }
        },
        "additionalProperties": false,
        "description": "DTO để tạo mới đáp án"
      },
      "CreateSubjectDTO": {
        "required": [
          "gradeLevel"
        ],
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "nullable": true
          },
          "code": {
            "type": "string",
            "nullable": true
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "gradeLevel": {
            "maximum": 12,
            "minimum": 10,
            "type": "integer",
            "format": "int32"
          }
        },
        "additionalProperties": false,
        "description": "DTO dùng để tạo mới môn học"
      },
      "ExamQuestionCreateDTO": {
        "type": "object",
        "properties": {
          "questionId": {
            "type": "integer",
            "description": "ID của câu hỏi",
            "format": "int32",
            "example": 42
          },
          "order": {
            "type": "integer",
            "description": "Thứ tự câu hỏi trong bài thi",
            "format": "int32",
            "example": 1
          },
          "score": {
            "type": "number",
            "description": "Điểm số cho câu hỏi trong bài thi",
            "format": "double",
            "example": 1.5
          }
        },
        "additionalProperties": false,
        "description": "DTO thêm câu hỏi vào bài thi"
      },
      "ForgotPasswordRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "LoginRequest": {
        "type": "object",
        "properties": {
          "usernameOrEmail": {
            "type": "string",
            "nullable": true
          },
          "password": {
            "type": "string",
            "nullable": true
          },
          "rememberMe": {
            "type": "boolean"
          }
        },
        "additionalProperties": false
      },
      "ProblemDetails": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "nullable": true
          },
          "title": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "detail": {
            "type": "string",
            "nullable": true
          },
          "instance": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": { }
      },
      "RegisterRequest": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "nullable": true
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "fullName": {
            "type": "string",
            "nullable": true
          },
          "phoneNumber": {
            "type": "string",
            "nullable": true
          },
          "password": {
            "type": "string",
            "nullable": true
          },
          "confirmPassword": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "ResetPasswordRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "nullable": true
          },
          "resetCode": {
            "type": "string",
            "nullable": true
          },
          "newPassword": {
            "type": "string",
            "nullable": true
          },
          "confirmPassword": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "SubmitExamDTO": {
        "type": "object",
        "properties": {
          "examId": {
            "type": "integer",
            "description": "ID của bài thi",
            "format": "int32",
            "example": 15
          },
          "startTime": {
            "type": "string",
            "description": "Thời gian bắt đầu làm bài",
            "format": "date-time",
            "example": "2025-04-12T06:30:00Z"
          },
          "endTime": {
            "type": "string",
            "description": "Thời gian kết thúc làm bài",
            "format": "date-time",
            "example": "2025-04-12T07:15:00Z"
          },
          "notes": {
            "type": "string",
            "description": "Ghi chú của học sinh",
            "nullable": true,
            "example": "Tôi gặp khó khăn với câu hỏi số 5"
          },
          "sessionId": {
            "type": "string",
            "description": "ID của phiên làm bài",
            "nullable": true,
            "example": "session_9f8e7d6c5b4a"
          },
          "deviceInfo": {
            "type": "string",
            "description": "Thông tin thiết bị",
            "nullable": true,
            "example": "Mozilla/5.0 (Windows NT 10.0; Win64; x64)"
          },
          "isSubmittedManually": {
            "type": "boolean",
            "description": "Câu trả lời đã được nộp bởi người dùng (không phải tự động)",
            "example": true
          },
          "answers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AnswerSubmissionDTO"
            },
            "description": "Danh sách câu trả lời",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "DTO để nộp bài thi"
      },
      "UpdateAnswerScoreDTO": {
        "type": "object",
        "properties": {
          "studentAnswerId": {
            "type": "integer",
            "description": "ID của câu trả lời",
            "format": "int32",
            "example": 105
          },
          "score": {
            "type": "number",
            "description": "Điểm cập nhật",
            "format": "double",
            "example": 0.75
          },
          "comment": {
            "type": "string",
            "description": "Lý do cho điểm",
            "nullable": true,
            "example": "Câu trả lời đúng về cơ bản nhưng thiếu giải thích về cách áp dụng quy tắc l'Hôpital"
          },
          "status": {
            "type": "integer",
            "description": "Đánh dấu là đúng, đúng một phần hay sai\r\n1: Đúng, 2: Đúng một phần, 3: Sai",
            "format": "int32",
            "example": 2
          }
        },
        "additionalProperties": false,
        "description": "DTO cập nhật điểm cho một câu trả lời"
      },
      "UpdateQuestionDTO": {
        "type": "object",
        "properties": {
          "content": {
            "type": "string",
            "description": "Nội dung câu hỏi",
            "nullable": true
          },
          "questionType": {
            "type": "integer",
            "description": "Loại câu hỏi (1: Một đáp án, 2: Đúng-sai nhiều ý, 3: Trả lời ngắn)",
            "format": "int32",
            "nullable": true
          },
          "explanation": {
            "type": "string",
            "description": "Giải thích đáp án",
            "nullable": true
          },
          "subjectId": {
            "type": "integer",
            "description": "ID môn học",
            "format": "int32",
            "nullable": true
          },
          "chapterId": {
            "type": "integer",
            "description": "ID chương học",
            "format": "int32",
            "nullable": true
          },
          "lessonId": {
            "type": "integer",
            "description": "ID bài học",
            "format": "int32",
            "nullable": true
          },
          "questionLevelId": {
            "type": "integer",
            "description": "ID mức độ câu hỏi",
            "format": "int32",
            "nullable": true
          },
          "tags": {
            "type": "string",
            "description": "Từ khóa/tag của câu hỏi",
            "nullable": true
          },
          "suggestedTime": {
            "type": "integer",
            "description": "Thời gian gợi ý làm câu hỏi (giây)",
            "format": "int32",
            "nullable": true
          },
          "defaultScore": {
            "type": "number",
            "description": "Điểm mặc định của câu hỏi",
            "format": "double",
            "nullable": true
          },
          "isActive": {
            "type": "boolean",
            "description": "Trạng thái hoạt động",
            "nullable": true
          },
          "scoringConfig": {
            "type": "string",
            "description": "Cấu hình chấm điểm (JSON)",
            "nullable": true
          },
          "shortAnswerConfig": {
            "type": "string",
            "description": "Cấu hình cho câu trả lời ngắn (JSON)",
            "nullable": true
          },
          "options": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UpdateQuestionOptionDTO"
            },
            "description": "Danh sách các đáp án của câu hỏi",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "DTO dùng để cập nhật thông tin câu hỏi"
      },
      "UpdateQuestionOptionDTO": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "ID đáp án (null nếu đáp án mới)",
            "format": "int32"
          },
          "content": {
            "type": "string",
            "description": "Nội dung đáp án",
            "nullable": true
          },
          "isCorrect": {
            "type": "boolean",
            "description": "Đánh dấu đáp án đúng"
          },
          "orderIndex": {
            "type": "integer",
            "description": "Thứ tự hiển thị",
            "format": "int32"
          },
          "label": {
            "type": "string",
            "description": "Nhãn hiển thị (A, B, C, D...)",
            "nullable": true
          },
          "explanation": {
            "type": "string",
            "description": "Giải thích đáp án",
            "nullable": true
          },
          "isPartOfTrueFalseGroup": {
            "type": "boolean",
            "description": "Đáp án thuộc nhóm câu hỏi đúng-sai"
          },
          "groupId": {
            "type": "integer",
            "description": "ID nhóm cho câu hỏi đúng-sai nhiều ý",
            "format": "int32",
            "nullable": true
          },
          "scorePercentage": {
            "type": "integer",
            "description": "Phần trăm điểm cho đáp án này (dành cho câu trả lời ngắn)",
            "format": "int32"
          }
        },
        "additionalProperties": false,
        "description": "DTO đáp án khi cập nhật câu hỏi"
      },
      "UpdateResultDTO": {
        "type": "object",
        "properties": {
          "isReviewed": {
            "type": "boolean",
            "description": "Đã xem xét và hoàn thành chấm điểm"
          },
          "teacherComment": {
            "type": "string",
            "description": "Nhận xét của giáo viên",
            "nullable": true,
            "example": "Bài làm tốt, cần chú ý về cách tính đạo hàm"
          },
          "answerScores": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UpdateAnswerScoreDTO"
            },
            "description": "Danh sách cập nhật điểm cho các câu trả lời",
            "nullable": true
          },
          "reviewerId": {
            "type": "integer",
            "description": "ID người chấm điểm",
            "format": "int32",
            "nullable": true
          },
          "reviewedAt": {
            "type": "string",
            "description": "Thời gian chấm điểm",
            "format": "date-time"
          }
        },
        "additionalProperties": false,
        "description": "DTO để giáo viên cập nhật điểm bài thi"
      },
      "UpdateSubjectDTO": {
        "required": [
          "gradeLevel"
        ],
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "nullable": true
          },
          "code": {
            "type": "string",
            "nullable": true
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "gradeLevel": {
            "maximum": 12,
            "minimum": 10,
            "type": "integer",
            "format": "int32"
          }
        },
        "additionalProperties": false,
        "description": "DTO dùng để cập nhật môn học"
      },
      "UpdateUserDTO": {
        "required": [
          "fullName",
          "phoneNumber"
        ],
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "description": "Địa chỉ email mới của người dùng",
            "nullable": true,
            "example": "thien1124.new@example.com"
          },
          "fullName": {
            "type": "string",
            "description": "Họ và tên đầy đủ mới của người dùng",
            "nullable": true,
            "example": "Nguyễn Văn Thiện"
          },
          "phoneNumber": {
            "type": "string",
            "description": "Số điện thoại mới của người dùng",
            "nullable": true,
            "example": "0987654321"
          }
        },
        "additionalProperties": false,
        "description": "DTO dùng để cập nhật thông tin cá nhân của người dùng"
      },
      "UpdateUserRoleDTO": {
        "type": "object",
        "properties": {
          "role": {
            "type": "string",
            "description": "Vai trò mới của người dùng (Admin, Teacher, Student)",
            "nullable": true,
            "example": "Teacher"
          }
        },
        "additionalProperties": false,
        "description": "DTO dùng để cập nhật vai trò của người dùng (chỉ Admin mới có quyền)"
      },
      "UpdateUserStatusDTO": {
        "type": "object",
        "properties": {
          "isActive": {
            "type": "boolean",
            "description": "Trạng thái kích hoạt của tài khoản (true: kích hoạt, false: vô hiệu hóa)",
            "example": true
          }
        },
        "additionalProperties": false,
        "description": "DTO dùng để kích hoạt hoặc vô hiệu hóa tài khoản người dùng"
      }
    },
    "securitySchemes": {
      "Bearer": {
        "type": "apiKey",
        "description": "JWT Authorization header using the Bearer scheme. Example: \"Bearer {token}\"",
        "name": "Authorization",
        "in": "header"
      }
    }
  },
  "security": [
    {
      "Bearer": [ ]
    }
  ]
}